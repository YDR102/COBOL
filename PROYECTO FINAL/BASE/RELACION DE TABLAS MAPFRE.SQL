DROP TABLE IF EXISTS AGENTES_MAPFRE;
DROP TABLE IF EXISTS CLIENTES_MAPFRE;
DROP TABLE IF EXISTS VIDA_MAPFRE;
DROP TABLE IF EXISTS HOGAR_MAPFRE;
DROP TABLE IF EXISTS AUTO_MAPFRE;
-- COMMIT;

CREATE TABLE AUTO_MAPFRE
(
    POLIZA CHAR(09) NOT NULL,
    PRIMA DECIMAL(15,2) NOT NULL,
    EDAD INT NOT NULL,
    CATEGORIA CHAR(30) NOT NULL,
    COBERTURAS VARCHAR(500),
    FECHA_INICIO DATE NOT NULL,
    FECHA_VENCIMIENTO DATE NOT NULL,
    CONSTRAINT PK_POLIZA_AUTO  PRIMARY KEY (POLIZA)
);

CREATE UNIQUE INDEX IDX_POLIZA_AUTO 
ON AUTO_MAPFRE (POLIZA);

CREATE TABLE HOGAR_MAPFRE
(
    POLIZA CHAR(09) NOT NULL,
    PRIMA DECIMAL(15,2) NOT NULL,
    CONTENIENTE DECIMAL(15,2) NOT NULL,
    CONTENIDO DECIMAL(15,2) NOT NULL,
    COBERTURAS VARCHAR(500),
    FECHA_INICIO DATE NOT NULL,
    FECHA_VENCIMIENTO DATE NOT NULL,
    CONSTRAINT PK_POLIZA_HOGAR PRIMARY KEY (POLIZA)
);

CREATE UNIQUE INDEX IDX_POLIZA_HOGAR 
ON HOGAR_MAPFRE (POLIZA);

CREATE TABLE VIDA_MAPFRE
(
    POLIZA CHAR(09) NOT NULL,
    PRIMA DECIMAL(15,2) NOT NULL,
    EDAD INT NOT NULL,
    COBERTURAS VARCHAR(500),
    FECHA_INICIO DATE NOT NULL,
    FECHA_VENCIMIENTO DATE NOT NULL,
    CONSTRAINT PK_POLIZA_VIDA PRIMARY KEY (POLIZA)
);

CREATE UNIQUE INDEX IDX_POLIZA_VIDA 
ON VIDA_MAPFRE (POLIZA);

CREATE TABLE CLIENTES_MAPFRE
(
    DNI CHAR(09) NOT NULL,
    NOMBRE CHAR(75) NOT NULL,
    DIRECCION CHAR(150) NOT NULL,
    TELEFONO CHAR(10) NOT NULL,
    CONSTRAINT PK_DNI PRIMARY KEY (DNI)
);

CREATE UNIQUE INDEX IDX_DNI 
ON CLIENTES_MAPFRE (DNI);

CREATE TABLE AGENTES_MAPFRE
(
    NUM_AGENTE CHAR(09) NOT NULL,
    DNI_AG CHAR(09) NOT NULL,
    NOMBRE CHAR(25) NOT NULL,
    APE_1 CHAR(25) NOT NULL,
    APE_2 CHAR(25) NOT NULL,
    TELEFONO CHAR(10) NOT NULL,
    DNI_CLI CHAR(09) NOT NULL,
    FOREIGN KEY (DNI_CLI) 
    REFERENCES CLIENTES_MAPFRE(DNI),
    CONSTRAINT PK_DNI_CLI PRIMARY KEY (DNI_CLI)
);

CREATE UNIQUE INDEX IDX_DNI_CLI
ON AGENTES_MAPFRE (DNI_CLI);